<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come 
         *after* these tags -->
    <!-- FIXME: duplicates title: -->
    <meta name="description"
          content="350+ awesome locations in Berlin. Bars, cafés, clubs, restaurants, you name it!" />
    <meta name="author" content="Aurelien Lourot" />
    <meta name="keywords"
          content="berlin, bars, cafés, clubs, restaurants, awesome, locations" />
    <link rel="icon" href="assets/pics/maps_icon.png" />

    <title>myberl.in: 350+ awesome locations in Berlin</title>

    <!-- FIXME: duplicates title: -->
    <meta property="og:title" content="myberl.in: 350+ awesome locations in Berlin" />
    <meta property="og:url" content="https://myberl.in" />
    <meta property="og:type" content="website" />
    <!-- FIXME: duplicates meta description: -->
    <meta property="og:description" content="Bars, cafés, clubs, restaurants, you name it!" />
    <meta property="og:image" content="https://myberl.in/assets/pics/og_image_large.png" />
    <meta property="og:image:height" content="504" />
    <meta property="og:image:width" content="504" />

    <script src="thirdparty/polyfills.js"></script>
    <script src="lib/time.js"></script>
    <script>
      console.log(now() + ' Begin.');
    </script>

    <!-- Sentry -->
    <script src="https://cdn.ravenjs.com/3.7.0/raven.min.js"></script>
    <script>
      Raven && Raven.config(
        'https://1d3c67f0742440f590c60cf12d7b5d2b@sentry.io/150864', {
          ignoreUrls: [/localhost/,],
        }).install();
      console.log(now() + ' Raven loaded.');
    </script>

    <script src="lib/console.js"></script>
    <script>
      console.log('console.*() redefined.');
    </script>

    <script src="thirdparty/jquery-1.12.4.min.js"></script>
    <script>
      console.log('jQuery loaded.');
    </script>

    <link rel="stylesheet" type="text/css" class="ui"
          href="thirdparty/semantic-ui-2.1.8/semantic.min.css">
    <link rel="stylesheet" type="text/css" class="ui"
          href="thirdparty/semantic-ui-2.1.8/checkbox.min.css">
    <link rel="stylesheet" type="text/css" class="ui"
          href="thirdparty/semantic-ui-2.1.8/sidebar.min.css">
    <script src="thirdparty/semantic-ui-2.1.8/semantic.min.js"></script>
    <script>
      console.log('SemanticUI loaded.');
    </script>

    <!-- Bootstrap -->
    <link href="thirdparty/bootstrap-3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script>
      console.log('Bootstrap loaded.');
    </script>

    <!-- Font Awesome -->
    <link href="thirdparty/font-awesome-4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <script>
      console.log('FontAwesome loaded.');
    </script>

    <!-- http://joaopereirawd.github.io/animatedModal.js/ -->
    <link rel="stylesheet" href="thirdparty/animate.css/animate.min.css">

    <link href="style.css" rel="stylesheet">
    <link href="index.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Make sure we have Promises -->
    <script src="thirdparty/bluebird.min.js"></script>
    <script>
      console.log('bluebird loaded.');
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgo1hF6M7dGD75NQgfNXGvT422ri9ieyU&libraries=places">
    </script>
    <script>
      if (window.google) {
        console.log('Google Maps loaded.');
      } else {
        console.error('Failed to load Google Maps.');
        window.google = null;
      }
    </script>
    <script src="thirdparty/markerwithlabel.js"></script>
    <script src="thirdparty/geolocation-marker.js"></script>
    <script>
      if (window.GeolocationMarker) {
        console.log('GeolocationMarker loaded.');
      } else {
        console.error('Failed to load GeolocationMarker.');
        window.GeolocationMarker = null;
      }
    </script>

    <script src="thirdparty/x2js-1.2.0/xml2json.min.js"></script>
    <script>
      console.log('x2js loaded.');
    </script>

    <script>
      // Safari 5.0 doesn't support methods named `catch` (reserved keyword) and will fail on
      // parsing `angularjs-1.4.4/angular.min.js` because of that.
      new Promise(function() {}).catch();
      window.catchSupported = true;
    </script>
    <script>
      if (!window.catchSupported) {
        window.location.replace('error/tooold.html');
      }
    </script>
    <script src="thirdparty/angularjs-1.4.4/angular.min.js"></script>
    <script src="thirdparty/angularjs-1.4.4/angular-animate.min.js"></script>
    <script>
      console.log('AngularJS loaded.');
    </script>

    <script data-main="main.js" src="thirdparty/require.js"></script>
    <script>
      console.log('main.js loaded.');
    </script>
  </head>
  <body>

    <div class="ui sidebar hidden-xs">
      <marker-info on-tag-click="javascript: $('#navbar').collapse('show');"></marker-info>
    </div>
    <div class="ui sidebar bottom visible-xs">
      <!-- FIXME: duplicates previous sidebar -->
      <marker-info on-tag-click="javascript: $('#navbar').collapse('show');"></marker-info>
    </div>
    <div class="pusher">
      <map on-marker-click="javascript: showSidebar(); $('#navbar').collapse('hide');">
      </map>

      <nav class="navbar navbar-inverse">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <!-- These are the 3 bars of the menu button on mobile: -->
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="navbar-brand">
              <span class="brand"><span class="my">MY</span>BERL.IN</span>
            </div>
            <a class="btn btn-default btn-sm navbar-btn pull-right hide-when-slow marker_list_open"
               href="#marker_list">
              <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> |
              <span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
              <marker-amount></marker-amount>
            </a>
            <p class="navbar-text pull-right marker-approx-amount show-when-slow">
              <!-- FIXME: duplicates title: -->
              <span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> 350+
            </p>
          </div>
          <div id="navbar" class="collapse navbar-collapse">
            <tag-filters></tag-filters>
            <form class="navbar-form navbar-left">
              <a class="btn-bar"
                 href="https://github.com/AurelienLourot/myberl.in"
                 target="_blank" title="GitHub">
                <i class="fa fa-github fa-2x"></i>
              </a>
              <a class="btn-bar help_open" href="#help" title="Help">
                <i class="fa fa-question-circle fa-2x"></i>
              </a>
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <status-label></status-label>

    <div id="help" class="modal-page hidden">
      <div class="closebt-container close-help">
        <img class="closebt" src="thirdparty/animated-modal-assets/closebt.svg"/>
      </div>
      <h1>Made with <i class="fa fa-heart"></i> in Berlin by</h1>
      <div class="container-fluid">
        <!-- FIXME: angularize to avoid repetition -->
        <div class="media col-sm-offset-2 col-sm-10 col-md-offset-3 col-md-9 col-lg-offset-4 col-lg-8">
          <a href="http://lourot.com/" target="_blank">
            <div class="media-left">
              <img class="media-object" src="assets/pics/aure.jpg" />
            </div>
            <div class="media-body">
              <h3 class="media-heading">Auré, 30</h3>
              <h4 class="media-heading">Programmer & Place hunter</h4>
            </div>
          </a>
        </div>
        <div class="media col-sm-offset-2 col-sm-10 col-md-offset-3 col-md-9 col-lg-offset-4 col-lg-8">
          <div class="media-left">
            <img class="media-object" src="assets/pics/franzi.jpg" />
          </div>
          <div class="media-body">
            <h3 class="media-heading">Franzi, 30</h3>
            <h4 class="media-heading">Place hunter</h4>
          </div>
        </div>
        <div class="media col-sm-offset-2 col-sm-10 col-md-offset-3 col-md-9 col-lg-offset-4 col-lg-8">
          <a href="http://brillout.com/" target="_blank">
            <div class="media-left">
              <img class="media-object" src="assets/pics/romu.jpg" />
            </div>
            <div class="media-body">
              <h3 class="media-heading">Romu, 30</h3>
              <h4 class="media-heading">Place hunter</h4>
            </div>
          </a>
        </div>
        <div class="media col-sm-offset-2 col-sm-10 col-md-offset-3 col-md-9 col-lg-offset-4 col-lg-8">
          <a href="https://github.com/AurelienLourot/myberl.in/blob/master/doc/contrib/README.md"
             target="_blank">
            <div class="media-left">
              <div class="media-object">
                <i class="fa fa-plus fa-2x"></i>
              </div>
            </div>
            <div class="media-body">
              <h4 class="media-heading">I want to contribute!</h4>
            </div>
          </a>
        </div>
      </div>
    </div>

    <div id="marker_list" class="modal-page hidden">
      <div class="closebt-container close-marker_list">
        <img class="closebt" src="thirdparty/animated-modal-assets/closebt.svg"/>
      </div>
      <marker-list on-marker-click="javascript: $('.close-marker_list').click();"></marker-list>
    </div>

    <div id="dbg_secret" class="modal-page hidden">
      <div class="closebt-container close-dbg_secret">
        <img class="closebt" src="thirdparty/animated-modal-assets/closebt.svg"/>
      </div>
      <h1>Debug</h1>
      <p>
        <button class="btn btn-default" onclick="dbg.click_each_visible_marker();">
          Click each visible marker
        </button>
      </p>
      <p>
        <button class="btn btn-default" onclick="dbg.disable_decluttering();">
          Disable decluttering
        </button>
      </p>
      <p>
        <button class="btn btn-default" onclick="dbg.remove_all_markers();">
          Remove all markers
        </button>
      </p>
    </div>
    <div class="hidden"><a class="dbg_secret_open" href="#dbg_secret"></a></div>

    <!-- http://joaopereirawd.github.io/animatedModal.js/ -->
    <script src="thirdparty/animated-modal-1.0/animatedModal.min.js"></script>
    <script>
      console.log('animatedModal loaded.');
    </script>

    <script src="thirdparty/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script>
      console.log('bootstrap loaded.');
    </script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="thirdparty/bootstrap-assets/ie10-viewport-bug-workaround.js"></script>
    <script>
      console.log('ie10-viewport-bug-workaround.js loaded.');
    </script>

    <script>
      // Defer loading of Google Fonts. See https://www.giftofspeed.com/defer-loading-css/ :
      var fonts = ['https://fonts.googleapis.com/css?family=Open+Sans',
                   'https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300'];
      for (var i = 0; i < fonts.length; ++i) {
        var font = fonts[i];
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = fonts[i];
        var firstLink = document.getElementsByTagName('link')[0];
        firstLink.parentNode.insertBefore(link, firstLink);
      }
      console.log('Google Fonts loaded.');
    </script>
  </body>
</html>
